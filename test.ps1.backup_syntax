# ============================================
# UCAS SYSTEM - COMPLETE E2E TEST SUITE v5.0
# ============================================
# All 20 tests implemented

Write-Host "`nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor Cyan
Write-Host "â•‘   UCAS SYSTEM - COMPLETE E2E VALIDATION   â•‘" -ForegroundColor Cyan
Write-Host "â•‘   All 20 Tests - Production Ready         â•‘" -ForegroundColor Cyan
Write-Host "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`n" -ForegroundColor Cyan

# ============================================
# HELPER FUNCTIONS
# ============================================

function Invoke-SafeWebRequest {
    param(
        [string]$Uri,
        [string]$Method = "GET",
        [string]$ContentType = "application/json; charset=utf-8",
        [string]$Body = $null
    )
    
    try {
        $params = @{
            Uri = $Uri
            Method = $Method
            ErrorAction = "Stop"
        }
        
        if ($ContentType) { $params.ContentType = $ContentType }
        if ($Body) { 
            $params.Body = [System.Text.Encoding]::UTF8.GetBytes($Body)
        }
        
        $response = Invoke-WebRequest @params
        return @{ Success = $true; StatusCode = $response.StatusCode; Content = $response.Content }
    } catch {
        $statusCode = if ($_.Exception.Response) { $_.Exception.Response.StatusCode.Value__ } else { 0 }
        $content = ""
        
        if ($_.Exception.Response) {
            try {
                $stream = $_.Exception.Response.GetResponseStream()
                $reader = New-Object System.IO.StreamReader($stream)
                $content = $reader.ReadToEnd()
            } catch {}
        }
        
        return @{ Success = $false; StatusCode = $statusCode; Content = $content; Error = $_.Exception.Message }
    }
}

$script:test_results = @{
    passed = 0
    failed = 0
    warnings = 0
}

# ============================================
# PHASE 0: CLEANUP
# ============================================

Write-Host "[0/20] CLEANUP: Remove test data and subscriptions" -ForegroundColor Yellow

Write-Host "  â€¢ Cleaning categorizers..." -ForegroundColor Gray
@("e2e-full-cascade", "e2e-test-final", "e2e-test-webhooks") | ForEach-Object {
    Invoke-SafeWebRequest -Uri "http://localhost:8001/categorizers/$_" -Method DELETE | Out-Null
}

Write-Host "  â€¢ Cleaning webhooks..." -ForegroundColor Gray
try {
    $webhooks = Invoke-RestMethod -Uri "http://localhost:8040/webhooks" -ErrorAction SilentlyContinue
    $webhooks.webhooks | ForEach-Object {
        Invoke-SafeWebRequest -Uri "http://localhost:8040/webhooks/$($_.webhook_id)" -Method DELETE | Out-Null
    }
} catch {}

if (Test-Path "test_data") { Remove-Item "test_data" -Recurse -Force }
New-Item -ItemType Directory -Path "test_data" -Force | Out-Null

Write-Host "  âœ… Cleanup complete.`n" -ForegroundColor Green

# ============================================
# PHASE 1: SYSTEM HEALTH (Tests 1-2)
# ============================================

Write-Host "[1/20] System Health Check" -ForegroundColor Yellow
try {
    $health = Invoke-RestMethod -Uri "http://localhost:8001/health" -ErrorAction Stop
    Write-Host "  Categorizer: $($health.status)" -ForegroundColor $(if($health.status -eq "healthy"){"Green"}else{"Red"})
    Write-Host "  Tags Layer: $($health.layers.tags)" -ForegroundColor $(if($health.layers.tags -eq "healthy"){"Green"}else{"Red"})
    Write-Host "  XGBoost Layer: $($health.layers.xgboost)" -ForegroundColor $(if($health.layers.xgboost -eq "healthy"){"Green"}else{"Red"})
    Write-Host "  LLM Layer: $($health.layers.llm)" -ForegroundColor $(if($health.layers.llm -eq "healthy"){"Green"}else{"Red"})
    Write-Host "  Database: $($health.database)`n" -ForegroundColor $(if($health.database -eq "healthy"){"Green"}else{"Red"})
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ Health check failed`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[2/20] HIL Layer Health Check" -ForegroundColor Yellow
try {
    $hil_health = Invoke-RestMethod -Uri "http://localhost:8040/health" -ErrorAction Stop
    Write-Host "  Status: $($hil_health.status)" -ForegroundColor Green
    Write-Host "  Service: UCAS HIL Layer`n" -ForegroundColor Green
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ HIL health check failed`n" -ForegroundColor Red
    $script:test_results.failed++
}

# ============================================
# PHASE 2: WEBHOOKS (Tests 3-5)
# ============================================

Write-Host "[3/20] Register Webhooks" -ForegroundColor Yellow

$webhook1_url = "https://webhook.site/unique-$(Get-Random)"
$webhook2_url = "https://webhook.site/unique-$(Get-Random)"

try {
    $uriBuilder1 = New-Object System.UriBuilder("http://localhost:8040/webhooks/register")
    $uriBuilder1.Query = "name=TestHook1&url=$webhook1_url"
    $wh1 = Invoke-RestMethod -Uri $uriBuilder1.Uri.AbsoluteUri -Method POST -ErrorAction Stop
    Write-Host "  âœ… Webhook 1: $($wh1.webhook_id) registered" -ForegroundColor Green

    $uriBuilder2 = New-Object System.UriBuilder("http://localhost:8040/webhooks/register")
    $uriBuilder2.Query = "name=TestHook2&url=$webhook2_url"
    $wh2 = Invoke-RestMethod -Uri $uriBuilder2.Uri.AbsoluteUri -Method POST -ErrorAction Stop
    Write-Host "  âœ… Webhook 2: $($wh2.webhook_id) registered`n" -ForegroundColor Green
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ Webhook registration failed: $($_.Exception.Message)`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[4/20] List and Validate Webhooks" -ForegroundColor Yellow
try {
    $webhooks_list = Invoke-RestMethod -Uri "http://localhost:8040/webhooks" -ErrorAction Stop
    Write-Host "  Total registered: $($webhooks_list.count)" -ForegroundColor Green
    $webhooks_list.webhooks | ForEach-Object {
        Write-Host "  â€¢ $($_.name) â†’ $($_.url)" -ForegroundColor Gray
    }
    Write-Host ""
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ Webhook listing failed`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[5/20] Test Duplicate Webhook Registration (Should 409)" -ForegroundColor Yellow
$dup_result = Invoke-SafeWebRequest -Uri "http://localhost:8040/webhooks/register?name=Duplicate&url=$webhook1_url" -Method POST

if ($dup_result.StatusCode -eq 409) {
    Write-Host "  âœ… Correctly rejected with 409 Conflict`n" -ForegroundColor Green
    $script:test_results.passed++
} else {
    Write-Host "  âŒ Expected 409, got: $($dup_result.StatusCode)`n" -ForegroundColor Red
    $script:test_results.failed++
}

# ============================================
# PHASE 3: TRAINING (Tests 6-8)
# ============================================

Write-Host "[6/20] Train Full Cascade Categorizer (tags, xgboost, llm)" -ForegroundColor Yellow

$train_full_payload = @{
    name = "E2E Full Cascade"
    description = "Test all layers"
    training_data = @(
        @{ text = "This product is fantastic, highly recommended!"; category = "Positive" },
        @{ text = "Very disappointed with the quality."; category = "Negative" },
        @{ text = "Delivery arrived on time."; category = "Logistics" },
        @{ text = "Customer service was very helpful."; category = "Support" },
        @{ text = "Product arrived damaged."; category = "Negative" },
        @{ text = "Price is too high for this quality."; category = "Negative" },
        @{ text = "Fast shipping and great contact."; category = "Logistics" }
    )
    layers = @("tags", "xgboost", "llm")
    fallback_category = "Other"
} | ConvertTo-Json -Depth 5

$train_full_result = Invoke-SafeWebRequest -Uri "http://localhost:8001/train" -Method POST -Body $train_full_payload

if ($train_full_result.Success) {
    $train_full = $train_full_result.Content | ConvertFrom-Json
    Write-Host "  âœ… Categorizer ID: $($train_full.categorizer_id)" -ForegroundColor Green
    Write-Host "  âœ… Layers: $($train_full.layers -join ', ')" -ForegroundColor Green
    Write-Host "  âœ… Embeddings Generated: $($train_full.embeddings_generated)`n" -ForegroundColor Green
    $script:test_results.passed++
    $script:full_cat_id = $train_full.categorizer_id
} else {
    Write-Host "  âŒ Training failed (HTTP $($train_full_result.StatusCode))`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[7/20] Train Simple Categorizer (Tags only)" -ForegroundColor Yellow
$train_simple_payload = @{
    name = "E2E Test Final"
    description = "Complete validation test"
    training_data = @(
        @{ text = "Product damaged broken"; category = "Quality" },
        @{ text = "Delivery delayed late"; category = "Logistics" },
        @{ text = "Support helpful friendly"; category = "Support" }
    )
    layers = @("tags")
    fallback_category = "Other"
} | ConvertTo-Json -Depth 5

$train_result = Invoke-SafeWebRequest -Uri "http://localhost:8001/train" -Method POST -Body $train_simple_payload

if ($train_result.Success) {
    $train = $train_result.Content | ConvertFrom-Json
    Write-Host "  âœ… Categorizer ID: $($train.categorizer_id)" -ForegroundColor Green
    Write-Host "  âœ… Categories: $($train.categories -join ', ')" -ForegroundColor Green
    Write-Host "  âœ… Training Samples: $($train.training_samples)`n" -ForegroundColor Green
    $script:test_results.passed++
    $script:simple_cat_id = $train.categorizer_id
} else {
    Write-Host "  âŒ Training failed (HTTP $($train_result.StatusCode))`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[8/20] Test Duplicate Name (Should Return 409)" -ForegroundColor Yellow
$dup_train = Invoke-SafeWebRequest -Uri "http://localhost:8001/train" -Method POST -Body $train_simple_payload

if ($dup_train.StatusCode -eq 409) {
    Write-Host "  âœ… Duplicate correctly rejected`n" -ForegroundColor Green
    $script:test_results.passed++
} else {
    Write-Host "  âŒ Expected 409, got $($dup_train.StatusCode)`n" -ForegroundColor Red
    $script:test_results.failed++
}

# ============================================
# PHASE 4: CLASSIFICATION (Tests 9-11)
# ============================================

Write-Host "[9/20] Test RAG with /search_similar" -ForegroundColor Yellow

if ($script:full_cat_id) {
    $rag_payload = @{
        categorizer_id = $script:full_cat_id
        query_text = "product quality is bad"
        top_k = 2
    } | ConvertTo-Json

    $rag_result = Invoke-SafeWebRequest -Uri "http://localhost:8001/search_similar" -Method POST -Body $rag_payload

    if ($rag_result.Success) {
        $rag = $rag_result.Content | ConvertFrom-Json
        if ($rag.count -gt 0) {
            Write-Host "  âœ… Found $($rag.count) similar samples" -ForegroundColor Green
            $first = $rag.samples[0]
            Write-Host "  Top: '$($first.text)' (Similarity: $([math]::Round($first.similarity, 2)))`n" -ForegroundColor Gray
            $script:test_results.passed++
        } else {
            Write-Host "  âš ï¸  No similar samples found`n" -ForegroundColor Yellow
            $script:test_results.warnings++
        }
    } else {
        Write-Host "  âŒ RAG search failed (HTTP $($rag_result.StatusCode))`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} else {
    Write-Host "  âš ï¸  Skipped (no categorizer)`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

Write-Host "[10/20] Classify - Tags Layer (Exact Match)" -ForegroundColor Yellow

if ($script:simple_cat_id) {
    $classify1_payload = @{
        categorizer_id = $script:simple_cat_id
        text = "product broken damaged"
        strategy = "cascade"
    } | ConvertTo-Json

    $result1_response = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $classify1_payload

    if ($result1_response.Success) {
        $result1 = $result1_response.Content | ConvertFrom-Json
        Write-Host "  âœ… Category: $($result1.category)" -ForegroundColor Green
        Write-Host "  Confidence: $($result1.confidence) | Method: $($result1.method) | Time: $([math]::Round($result1.processing_time_ms, 2))ms`n" -ForegroundColor Cyan
        $script:test_results.passed++
    } else {
        Write-Host "  âŒ Classification failed (HTTP $($result1_response.StatusCode))`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} else {
    Write-Host "  âš ï¸  Skipped (no categorizer)`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

Write-Host "[11/20] Classify - Partial Match" -ForegroundColor Yellow

if ($script:simple_cat_id) {
    $classify2_payload = @{
        categorizer_id = $script:simple_cat_id
        text = "support team was great and helpful"
        strategy = "cascade"
    } | ConvertTo-Json

    $result2_response = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $classify2_payload

    if ($result2_response.Success) {
        $result2 = $result2_response.Content | ConvertFrom-Json
        Write-Host "  âœ… Category: $($result2.category)" -ForegroundColor Green
        Write-Host "  Confidence: $($result2.confidence) | Method: $($result2.method)`n" -ForegroundColor Cyan
        $script:test_results.passed++
    } else {
        Write-Host "  âŒ Classification failed`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} else {
    Write-Host "  âš ï¸  Skipped`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

# ============================================
# PHASE 5: HIL (Tests 12-15)
# ============================================

Write-Host "[12/20] Test HIL Escalation (Low Confidence)" -ForegroundColor Yellow

if ($script:simple_cat_id) {
    $hil_payload = @{
        categorizer_id = $script:simple_cat_id
        text = "this is very strange text that does not fit any category at all"
        strategy = "cascade"
    } | ConvertTo-Json

    $hil_result_response = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $hil_payload

    if ($hil_result_response.Success) {
        $hil_result = $hil_result_response.Content | ConvertFrom-Json
        
        if ($hil_result.method -eq "hil_pending") {
            Write-Host "  âœ… Classification escalated to HIL" -ForegroundColor Green
            Write-Host "  Review ID: $($hil_result.hil_review_id)`n" -ForegroundColor Gray
            $script:test_results.passed++
        } else {
            Write-Host "  âš ï¸  Not escalated (method: $($hil_result.method), confidence: $($hil_result.confidence))`n" -ForegroundColor Yellow
            $script:test_results.warnings++
        }
    } else {
        Write-Host "  âŒ Escalation test failed`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} else {
    Write-Host "  âš ï¸  Skipped`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

Write-Host "[13/20] Get Pending HIL Reviews" -ForegroundColor Yellow
try {
    $pending = Invoke-RestMethod -Uri "http://localhost:8040/pending" -ErrorAction Stop
    Write-Host "  âœ… Pending reviews: $($pending.Count)" -ForegroundColor Green
    if ($pending.Count -gt 0) {
        $pending | Select-Object -First 2 | ForEach-Object {
            Write-Host "  â€¢ [$($_.status)] $($_.text.Substring(0, [Math]::Min(50, $_.text.Length)))" -ForegroundColor Gray
        }
    }
    Write-Host ""
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ Failed to get pending reviews`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[14/20] Get Webhook Delivery History" -ForegroundColor Yellow
try {
    $webhooks_list = Invoke-RestMethod -Uri "http://localhost:8040/webhooks" -ErrorAction Stop
    if ($webhooks_list.webhooks.Count -gt 0) {
        $wh_id = $webhooks_list.webhooks[0].webhook_id
        $history = Invoke-RestMethod -Uri "http://localhost:8040/webhooks/$wh_id/history" -ErrorAction Stop
        Write-Host "  âœ… Webhook: $($webhooks_list.webhooks[0].name)" -ForegroundColor Green
        Write-Host "  Deliveries: $($history.total)`n" -ForegroundColor Cyan
        $script:test_results.passed++
    } else {
        Write-Host "  âš ï¸  No webhooks registered`n" -ForegroundColor Yellow
        $script:test_results.warnings++
    }
} catch {
    Write-Host "  âŒ Webhook history failed`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[15/20] Test Webhook Test Endpoint" -ForegroundColor Yellow
try {
    $webhooks_list = Invoke-RestMethod -Uri "http://localhost:8040/webhooks" -ErrorAction Stop
    if ($webhooks_list.webhooks.Count -gt 0) {
        $wh_id = $webhooks_list.webhooks[0].webhook_id
        $test_result = Invoke-RestMethod -Uri "http://localhost:8040/webhooks/$wh_id/test" -Method POST -ErrorAction Stop
        Write-Host "  âœ… Test payload sent: $($test_result.status)`n" -ForegroundColor Green
        $script:test_results.passed++
    }
} catch {
    Write-Host "  âš ï¸  Test failed (webhook endpoint may be unreachable)`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

# ============================================
# PHASE 6: ERROR HANDLING (Tests 16-17)
# ============================================

Write-Host "[16/20] Test 404 Not Found" -ForegroundColor Yellow
$body_404 = '{"categorizer_id":"nonexistent-cat","text":"test"}'
$response_404 = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $body_404

if ($response_404.StatusCode -eq 404) {
    Write-Host "  âœ… Correctly received HTTP 404`n" -ForegroundColor Green
    $script:test_results.passed++
} else {
    Write-Host "  âŒ Expected 404, got: $($response_404.StatusCode)`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[17/20] Test Invalid JSON (400/422)" -ForegroundColor Yellow
$bad_json = '{"bad": json syntax}'
$response_400 = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $bad_json

if ($response_400.StatusCode -eq 400 -or $response_400.StatusCode -eq 422) {
    Write-Host "  âœ… Correctly rejected invalid data ($($response_400.StatusCode))`n" -ForegroundColor Green
    $script:test_results.passed++
} else {
    Write-Host "  âš ï¸  Got: $($response_400.StatusCode) (expected 400/422)`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

# ============================================
# PHASE 7: PERSISTENCE (Tests 18-20)
# ============================================

Write-Host "[18/20] Persistence Test - List Categorizers Before Restart" -ForegroundColor Yellow
try {
    $categorizers = Invoke-RestMethod -Uri "http://localhost:8001/categorizers" -ErrorAction Stop
    $count_before = $categorizers.Count
    Write-Host "  Total categorizers: $count_before`n" -ForegroundColor Green
    $script:test_results.passed++
} catch {
    Write-Host "  âŒ Failed to list categorizers`n" -ForegroundColor Red
    $script:test_results.failed++
    $count_before = 0
}

Write-Host "[19/20] Restart Orchestrator and Verify Persistence" -ForegroundColor Yellow
Write-Host "  Restarting services..." -ForegroundColor Gray
podman-compose restart orchestrator 2>&1 | Out-Null
Start-Sleep -Seconds 15

try {
    $post_restart = Invoke-RestMethod -Uri "http://localhost:8001/categorizers" -ErrorAction Stop
    $count_after = $post_restart.Count

    if ($count_after -ge $count_before) {
        Write-Host "  âœ… Data persisted: $count_before â†’ $count_after categorizers`n" -ForegroundColor Green
        $script:test_results.passed++
    } else {
        Write-Host "  âŒ Data loss detected: $count_before â†’ $count_after`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} catch {
    Write-Host "  âŒ Persistence check failed`n" -ForegroundColor Red
    $script:test_results.failed++
}

Write-Host "[20/20] Re-classify After Restart" -ForegroundColor Yellow

if ($script:simple_cat_id) {
    $final_payload = @{
        categorizer_id = $script:simple_cat_id
        text = "product broken"
        strategy = "cascade"
    } | ConvertTo-Json

    $final_response = Invoke-SafeWebRequest -Uri "http://localhost:8001/classify" -Method POST -Body $final_payload

    if ($final_response.Success) {
        $final = $final_response.Content | ConvertFrom-Json
        Write-Host "  âœ… Category: $($final.category) | Method: $($final.method)`n" -ForegroundColor Green
        $script:test_results.passed++
    } else {
        Write-Host "  âŒ Classification after restart failed`n" -ForegroundColor Red
        $script:test_results.failed++
    }
} else {
    Write-Host "  âš ï¸  Skipped (no categorizer)`n" -ForegroundColor Yellow
    $script:test_results.warnings++
}

# ============================================
# FINAL REPORT
# ============================================

Write-Host "`nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor Green
Write-Host "â•‘         E2E TEST SUMMARY                   â•‘" -ForegroundColor Green
Write-Host "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`n" -ForegroundColor Green

$total = $script:test_results.passed + $script:test_results.failed + $script:test_results.warnings

Write-Host "RESULTS:" -ForegroundColor Cyan
Write-Host "  âœ… Passed: $($script:test_results.passed)/$total" -ForegroundColor Green
Write-Host "  âŒ Failed: $($script:test_results.failed)/$total" -ForegroundColor $(if($script:test_results.failed -gt 0){"Red"}else{"Gray"})
Write-Host "  âš ï¸  Warnings: $($script:test_results.warnings)/$total" -ForegroundColor $(if($script:test_results.warnings -gt 0){"Yellow"}else{"Gray"})

$pass_rate = [math]::Round(($script:test_results.passed / $total) * 100, 1)
Write-Host "`nPass Rate: $pass_rate%" -ForegroundColor $(if($pass_rate -ge 90){"Green"}elseif($pass_rate -ge 70){"Yellow"}else{"Red"})

if ($script:test_results.failed -eq 0 -and $pass_rate -ge 90) {
    Write-Host "`nâœ…âœ… PERFECT! ALL TESTS PASSED - SYSTEM 100% OPERATIONAL" -ForegroundColor Green
} elseif ($script:test_results.failed -eq 0) {
    Write-Host "`nâœ… ALL CRITICAL TESTS PASSED - SYSTEM OPERATIONAL" -ForegroundColor Green
} elseif ($script:test_results.failed -le 2) {
    Write-Host "`nâš ï¸  MINOR ISSUES - SYSTEM MOSTLY OPERATIONAL" -ForegroundColor Yellow
} else {
    Write-Host "`nâŒ MULTIPLE FAILURES - REVIEW REQUIRED" -ForegroundColor Red
}

Write-Host "`nğŸ’¡ TIP: Run this test after any changes to verify system integrity" -ForegroundColor Cyan
Write-Host "ğŸ“Š Detailed logs available in: podman compose logs <service>`n" -ForegroundColor Cyan
